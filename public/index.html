<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Random Student Picker</title>
  <style>
    body { font-family: sans-serif; margin: 2rem; }
    textarea { width: 100%; height: 100px; }
    button { margin: 5px; padding: 8px 12px; }
    #results { margin-top: 20px; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
  </style>
</head>
<body>
  <h1>ðŸŽ² Random Student Picker</h1>

  <h3>Class Roster</h3>
  <textarea id="roster" placeholder="Enter one student per line"></textarea>
  <br />
  <button onclick="loadRoster()">Load Roster</button>

  <h3>Actions</h3>
  <button onclick="pickRandom()">Pick Random Student</button>
  <div id="current"></div>

  <h3>Class Records</h3>
  <table id="records">
    <thead>
      <tr><th>Name</th><th>Attendance</th><th>Recitation</th></tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    let students = [];
    let records = {};

    function loadRoster() {
      students = document.getElementById("roster").value.split("\n").filter(s => s.trim() !== "");
      records = {};
      students.forEach(s => {
        records[s] = { attendance: "Absent", recitation: 0 };
      });
      renderTable();
    }

    function pickRandom() {
      if (students.length === 0) return alert("No students loaded!");
      const idx = Math.floor(Math.random() * students.length);
      const student = students[idx];
      document.getElementById("current").innerHTML = `<h2>ðŸŽ‰ ${student}</h2>
        <button onclick="markPresent('${student}')">Mark Present</button>
        <button onclick="givePoints('${student}', 5)">+5 pts</button>
        <button onclick="givePoints('${student}', 10)">+10 pts</button>`;
    }

    function markPresent(name) {
      records[name].attendance = "Present";
      renderTable();
    }

    function givePoints(name, pts) {
      records[name].attendance = "Present";
      records[name].recitation += pts;
      renderTable();
    }

    function renderTable() {
      const tbody = document.querySelector("#records tbody");
      tbody.innerHTML = "";
      for (const [name, data] of Object.entries(records)) {
        tbody.innerHTML += `<tr>
          <td>${name}</td>
          <td>${data.attendance}</td>
          <td>${data.recitation}</td>
        </tr>`;
      }
    }
  </script>
</body>
</html>
